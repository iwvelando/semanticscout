# Test Scripts

This directory contains standalone test scripts for validating specific features of Semantic Scout without running the full pipeline.

## test_slack.py

Tests the Slack threaded message integration by posting sample job data to your Slack channel.

### What It Does

- Posts a summary message with statistics (7 sample jobs)
- Adds 2 threaded replies with formatted job cards
- Uses the same Block Kit formatting as the real reports
- Validates bot token permissions and channel access

### Prerequisites

1. **Create a Slack App** at https://api.slack.com/apps
2. **Add Bot Token Scopes** under OAuth & Permissions:
   - `chat:write` - Required to post messages
3. **Install the app** to your workspace
4. **Copy the Bot Token** (starts with `xoxb-`)
5. **Get the Channel ID** (right-click channel â†’ View channel details â†’ Copy ID)
6. **Invite the bot** to the channel: `/invite @YourBotName`

### Usage

**Option 1: Command line arguments**

```bash
cd test_scripts
python test_slack.py --bot-token "xoxb-your-token" --channel-id "C0123456789"
```

**Option 2: Environment variables**

```bash
export SLACK_BOT_TOKEN="xoxb-your-token"
export SLACK_CHANNEL_ID="C0123456789"
python test_scripts/test_slack.py
```

### Expected Output

```
ğŸš€ Posting test message to channel C0123456789...
   Using 7 sample jobs
âœ… Summary message posted (ts: 1234567890.123456)
âœ… Thread reply 1 posted (jobs 1-5)
âœ… Thread reply 2 posted (jobs 6-7)

ğŸ‰ Test complete! Check your Slack channel.
```

### Troubleshooting

| Error | Solution |
|-------|----------|
| `channel_not_found` | Invite the bot to the channel with `/invite @BotName` |
| `not_in_channel` | Same as above - bot needs to be a member |
| `invalid_auth` | Check your bot token is correct and starts with `xoxb-` |
| `missing_scope` | Add `chat:write` scope and reinstall the app |

### Sample Output

The test creates messages that look like:

```
ğŸ¯ Semantic Scout Report - February 01, 2026
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ¯ Jobs Found: 7    ğŸ† Top Score: 9.2/10
ğŸ“Š Avg Score: 8.2/10    ğŸ  Remote: 2
ğŸ“ Sources: Indeed: 3 | Linkedin: 4
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“‹ 7 opportunities ranked by score
See 2 threaded replies below for full details

Generated by Semantic Scout ğŸ” (TEST MESSAGE)
```

Each threaded reply contains formatted job cards with:
- Job title with score emoji (ğŸ”¥ â‰¥9, â­ â‰¥8, âœ¨ â‰¥7)
- Company name and location
- Remote badge ğŸ  if applicable
- Matched city annotation ğŸ“Œ (e.g., "nyc 5.2mi", "chicago 12.3mi")
- "View Job â†’" button linking to the listing
- LLM scoring reasoning

The sample jobs demonstrate multi-city matching with jobs matched to different target cities (nyc, chicago, boston, austin) and remote positions.
